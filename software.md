# 基本ソフトウェア
### OS（オペレーションシステム）
OSの役割は、CPU、メモリ、ハードディスク装置に代表されるコンピュータ資源を管理すること。
- シングルタスク：1つのプログラムだけを実行できる方式。
- マルチタスク：同時に複数のプログラムを実行できる方式。
- リアルタイムOS：定められた時間内に処理を完了させる機構を持つOS。組み込みシステムを制御する際に利用する。
- シングルユーザ：OSを1ユーザだけが利用できること。初期のパソコン用OSはこのシングルユーザであった。
- マルチユーザ：OSを複数のユーザーが同時に利用できること。現在のパソコンOSはこのマルチユーザ。
- CUI：コマンドを入力して利用する形態。コマンドプロンプトやターミナルのこと。
- GUI：ウィンドウやメニューを操作して利用する形態。
<br />

#### 代表的なOS
- Unix系：基本的にCUIで用いる。ネットワークサーバ用OSとして広く利用されている。Linuxもそのうちの一つ。
- Windows：マルチタスク・マルチユーザ・GUI対応のOS。マイクロソフト社。
- Mac：マルチタスク・マルチユーザ・GUI対応のOS。Apple社。
- Android：Linuxをベースとした、スマートフォン・タブレット用OS。
- iOS：MacOSをベースとした、iPhone用OS。
<br />

#### OSの３大機能
- タスク管理：CPUを休ませずに働かせるためのスケジュール管理を行う。
- 記憶管理：メモリを有効に利用するための管理を行う。
- ジョブ管理：ジョブの実行に必要な資源の予約や解放を行い、効率よくジョブを処理するための管理を行う。
<br />

#### タスクとジョブ
タスクは、コンピュータから見た仕事の単位。プロセスとも呼ぶ。<br>
ジョブは、人間から見た仕事の単位。<br>
ジョブは、複数のタスクから構成されるのが一般的。<br>
<br />
マルチタスク：本来CPUは1度に1つのプログラムしか実行できないが、OSによる管理を行えば、複数のプログラムを実行できるようになる。このことをマルチタスクという。<br>
<br />

#### カーネルとシェル
OSの中核部分をカーネルと呼ぶ。<br>
また、ユーザーが入力したコマンドを解釈して、カーネルに伝える役割を担う部分をシェルと呼ぶ。<br>
Windowsでは、Windows Power Shellというシェルが、MacOSやLinuxなどUnix系OSでは、bash,csh,zshなどのシェルが用意されている。<br>
<br />

#### プログラムの性質
マルチタスクOSでは、複数のプログラムが並列して同時に実行されるため、あるプログラムが複数のプログラムから同時に呼び出されるケースもある。<br>
同時に呼び出されても、正しく動作できるようにするためには、同時に呼び出されることを事前に想定し、設計しておく必要がある。<br>
このために、下記のような性質がある。<br>
<br />

- リエントラント（再入可能）：あるプロセスが利用している最中に、別のプロセスが利用してもそれぞれに正しい結果を返すという性質。複数プロセスから呼び出されても、干渉し合わず正しく動作する。
- リカーシブ（再帰可能）：自分自身を呼び出すことで処理を進められる性質。
- リユーザブル（再使用可能）：プログラムを初期化せずに再び利用しても正しく動作するという性質。
- リロケータブル（再配置可能）：プログラムをメモリ中のどの場所に配置しても正しく動作するという性質。
<br />
<br />

### タスク管理①タスクの状態遷移
タスクの3状態
- 実行可能状態：待合室で待っているのに相当する状態。タスクを起動すると、まず実行可能状態になる。自分に順番が回ってくるまで待機。
- 実行状態：今まさに処理されている最中のタスクの状態。基本的に1つのCPUでは1つのタスク実行しかできないため、より優先度の高いタスクが実行可能状態になると実行状態から実行可能状態に戻し、優先度の高いタスクの実行を行う。<br>
また、そのタスク実行にあたっての持ち時間が経過するか、自らCPUを手放した場合も同じく実行可能状態に戻る。<br>
- 待ち状態：倉庫にタスクが収納されているイメージ。タスクが入出力へのアクセスを行うとこの状態に移される。人間が入出力を行う時間は、CPUにとってはかなり長い時間となるため一旦倉庫に入れる。<br>
また、入出力装置から必要とするデータが到着すると実行可能状態へ移される。（待ち状態から実行可能状態に移るのは、入出力が完了した時。）
<br />

### タスク管理②スケジューリングアルゴリズムとコンテキスト切り替え
スケジューラは、実行可能状態のタスクを1つ選んで実行する。どれを選ぶかを決める手順を、スケジューリングアルゴリズムという。優先度順、ラウンドロビン、到着順などがある。<br>
- 優先度順：タスクに優先度を付け、優先度が最も高いタスクを選ぶ方法。
- ラウンドロビン：タスクに持ち時間（タイムスライス）を設定し、その時間が経過したら、次のタスクに順番を回す方法。
- 到着順：実行可能状態になった順に、タスクを選ぶ方法。
<br />

- コンテキスト切り替え
実行状態のタスクを切り替えること。切り替えの方式には、プリエンプティブ方式・ノンプリエンプティブ方式がある。<br>
- プリエンプティブ方式：「持ち時間（タイムスライス）切れ」や「優先度の高いタスクが実行可能状態になった」というきっかけで、OSが強制的に介入し、実行状態のタスクを別のタスクに切り替える方式。<br>
あるタスクが暴走しても、他のタスクには影響を与えず、システム全体が停止してしまうようなことにはならないようにしている。現在利用しているOS（Windows、MacOS、Linuxなど）はこの方式。<br>
- ノンプリエンプティブ方式：タスクが自らCPUを手放して、タスクを切り替える方式。OSが強制的に介入する仕組みを実装しなくて良い分、OS本体を簡略化できる。<br>
しかし、タスクが暴走したとすると、自分で手放すことができずシステム全体が停止してしまう事態となってしまう。
<br />
<br />

### 記憶管理①実記憶管理
- 固定区画方式：実記憶空間（コンピュータに実際に備わっている主記憶の領域）を一定サイズに区切り、この区画単位で領域を割り当てる方式。内部フラグメンテーションが生まれる。
- 可変区画方式：データにピッタリのサイズを用意する方式のこと。内部フラグメンテーションは生まれないが、区画と区画の隙間に細かい未使用領域（外部フラグメンテーション）が生まれる。未使用領域が増えてきたら、メモリコレクションを行い、細切れの未使用領域をまとめる。
- メモリーオーバーレイ：搭載されている主記憶量よりも、大きなサイズのプログラムを動かす技術のこと。プログラム全体を読み込むのではなく、機能単位のセグメントに分けて、必要なセグメントだけ実行することで実現している。
